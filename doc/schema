# Create schema:
create schema osmdb authorization osmdb;

# grant for user osmdb on osm
grant usage on schema osm to osmdb;
grant select, insert, update, delete on all tables in schema osm to osmdb;

# grant for user osmdb ob public
grant usage on schema public to osb_marten;
grant select on all tables in schema public to osb_marten;

# grant for user osmdb on osmdb
grant all privileges on schema osmdb to osmdb;
grant all privileges on all tables in schema osmdb to osmdb;

# move tables to the correct schema
alter table actions set schema osmdb;
alter table dimension_units set schema osmdb;
alter table hooks set schema osmdb;
alter table node_tags set schema osm;
alter table nodes set schema osm;
alter table osm_boundary set schema osm;
alter table osm_boundary_1 set schema osm;
alter table osm_boundary_10 set schema osm;
alter table osm_boundary_11 set schema osm;
alter table osm_boundary_12 set schema osm;
alter table osm_boundary_13 set schema osm;
alter table osm_boundary_14 set schema osm;
alter table osm_boundary_15 set schema osm;
alter table osm_boundary_16 set schema osm;
alter table osm_boundary_2 set schema osm;
alter table osm_boundary_3 set schema osm;
alter table osm_boundary_4 set schema osm;
alter table osm_boundary_5 set schema osm;
alter table osm_boundary_6 set schema osm;
alter table osm_boundary_7 set schema osm;
alter table osm_boundary_8 set schema osm;
alter table osm_boundary_9 set schema osm;
alter table osm_boundary_partition_geometry set schema osm;
alter table osm_boundary_partition_geometry_table_id_seq set schema osm;
alter table osm_boundary_update set schema osm;
alter table osm_cache set schema osmdb;
alter table osm_cache_depend set schema osmdb;
alter table osm_line set schema osm;
alter table osm_line_1 set schema osm;
alter table osm_line_10 set schema osm;
alter table osm_line_11 set schema osm;
alter table osm_line_12 set schema osm;
alter table osm_line_13 set schema osm;
alter table osm_line_14 set schema osm;
alter table osm_line_15 set schema osm;
alter table osm_line_16 set schema osm;
alter table osm_line_17 set schema osm;
alter table osm_line_18 set schema osm;
alter table osm_line_19 set schema osm;
alter table osm_line_2 set schema osm;
alter table osm_line_20 set schema osm;
alter table osm_line_21 set schema osm;
alter table osm_line_22 set schema osm;
alter table osm_line_23 set schema osm;
alter table osm_line_24 set schema osm;
alter table osm_line_25 set schema osm;
alter table osm_line_26 set schema osm;
alter table osm_line_27 set schema osm;
alter table osm_line_28 set schema osm;
alter table osm_line_29 set schema osm;
alter table osm_line_3 set schema osm;
alter table osm_line_30 set schema osm;
alter table osm_line_31 set schema osm;
alter table osm_line_32 set schema osm;
alter table osm_line_33 set schema osm;
alter table osm_line_34 set schema osm;
alter table osm_line_35 set schema osm;
alter table osm_line_36 set schema osm;
alter table osm_line_37 set schema osm;
alter table osm_line_38 set schema osm;
alter table osm_line_39 set schema osm;
alter table osm_line_4 set schema osm;
alter table osm_line_40 set schema osm;
alter table osm_line_41 set schema osm;
alter table osm_line_42 set schema osm;
alter table osm_line_43 set schema osm;
alter table osm_line_44 set schema osm;
alter table osm_line_45 set schema osm;
alter table osm_line_46 set schema osm;
alter table osm_line_47 set schema osm;
alter table osm_line_48 set schema osm;
alter table osm_line_5 set schema osm;
alter table osm_line_6 set schema osm;
alter table osm_line_7 set schema osm;
alter table osm_line_8 set schema osm;
alter table osm_line_9 set schema osm;
alter table osm_line_extract set schema osm;
alter table osm_line_extract_1 set schema osm;
alter table osm_line_extract_10 set schema osm;
alter table osm_line_extract_11 set schema osm;
alter table osm_line_extract_12 set schema osm;
alter table osm_line_extract_13 set schema osm;
alter table osm_line_extract_14 set schema osm;
alter table osm_line_extract_15 set schema osm;
alter table osm_line_extract_16 set schema osm;
alter table osm_line_extract_2 set schema osm;
alter table osm_line_extract_3 set schema osm;
alter table osm_line_extract_4 set schema osm;
alter table osm_line_extract_5 set schema osm;
alter table osm_line_extract_6 set schema osm;
alter table osm_line_extract_7 set schema osm;
alter table osm_line_extract_8 set schema osm;
alter table osm_line_extract_9 set schema osm;
alter table osm_line_extract_partition_geometry set schema osm;
alter table osm_line_extract_partition_geometry_table_id_seq set schema osm;
alter table osm_line_partition_geometry set schema osm;
alter table osm_line_partition_geometry_table_id_seq set schema osm;
alter table osm_point set schema osm;
alter table osm_point_1 set schema osm;
alter table osm_point_10 set schema osm;
alter table osm_point_11 set schema osm;
alter table osm_point_12 set schema osm;
alter table osm_point_13 set schema osm;
alter table osm_point_14 set schema osm;
alter table osm_point_15 set schema osm;
alter table osm_point_16 set schema osm;
alter table osm_point_17 set schema osm;
alter table osm_point_18 set schema osm;
alter table osm_point_19 set schema osm;
alter table osm_point_2 set schema osm;
alter table osm_point_20 set schema osm;
alter table osm_point_21 set schema osm;
alter table osm_point_22 set schema osm;
alter table osm_point_23 set schema osm;
alter table osm_point_24 set schema osm;
alter table osm_point_25 set schema osm;
alter table osm_point_26 set schema osm;
alter table osm_point_27 set schema osm;
alter table osm_point_28 set schema osm;
alter table osm_point_29 set schema osm;
alter table osm_point_3 set schema osm;
alter table osm_point_30 set schema osm;
alter table osm_point_31 set schema osm;
alter table osm_point_32 set schema osm;
alter table osm_point_33 set schema osm;
alter table osm_point_34 set schema osm;
alter table osm_point_35 set schema osm;
alter table osm_point_36 set schema osm;
alter table osm_point_37 set schema osm;
alter table osm_point_38 set schema osm;
alter table osm_point_39 set schema osm;
alter table osm_point_4 set schema osm;
alter table osm_point_40 set schema osm;
alter table osm_point_41 set schema osm;
alter table osm_point_42 set schema osm;
alter table osm_point_43 set schema osm;
alter table osm_point_44 set schema osm;
alter table osm_point_45 set schema osm;
alter table osm_point_46 set schema osm;
alter table osm_point_47 set schema osm;
alter table osm_point_48 set schema osm;
alter table osm_point_5 set schema osm;
alter table osm_point_6 set schema osm;
alter table osm_point_7 set schema osm;
alter table osm_point_8 set schema osm;
alter table osm_point_9 set schema osm;
alter table osm_point_extract set schema osm;
alter table osm_point_extract_1 set schema osm;
alter table osm_point_extract_10 set schema osm;
alter table osm_point_extract_11 set schema osm;
alter table osm_point_extract_12 set schema osm;
alter table osm_point_extract_13 set schema osm;
alter table osm_point_extract_14 set schema osm;
alter table osm_point_extract_15 set schema osm;
alter table osm_point_extract_16 set schema osm;
alter table osm_point_extract_2 set schema osm;
alter table osm_point_extract_3 set schema osm;
alter table osm_point_extract_4 set schema osm;
alter table osm_point_extract_5 set schema osm;
alter table osm_point_extract_6 set schema osm;
alter table osm_point_extract_7 set schema osm;
alter table osm_point_extract_8 set schema osm;
alter table osm_point_extract_9 set schema osm;
alter table osm_point_extract_partition_geometry set schema osm;
alter table osm_point_extract_partition_geometry_table_id_seq set schema osm;
alter table osm_point_partition_geometry set schema osm;
alter table osm_point_partition_geometry_table_id_seq set schema osm;
alter table osm_polygon set schema osm;
alter table osm_polygon_1 set schema osm;
alter table osm_polygon_10 set schema osm;
alter table osm_polygon_11 set schema osm;
alter table osm_polygon_12 set schema osm;
alter table osm_polygon_13 set schema osm;
alter table osm_polygon_14 set schema osm;
alter table osm_polygon_15 set schema osm;
alter table osm_polygon_16 set schema osm;
alter table osm_polygon_17 set schema osm;
alter table osm_polygon_18 set schema osm;
alter table osm_polygon_19 set schema osm;
alter table osm_polygon_2 set schema osm;
alter table osm_polygon_20 set schema osm;
alter table osm_polygon_21 set schema osm;
alter table osm_polygon_22 set schema osm;
alter table osm_polygon_23 set schema osm;
alter table osm_polygon_24 set schema osm;
alter table osm_polygon_25 set schema osm;
alter table osm_polygon_26 set schema osm;
alter table osm_polygon_27 set schema osm;
alter table osm_polygon_28 set schema osm;
alter table osm_polygon_29 set schema osm;
alter table osm_polygon_3 set schema osm;
alter table osm_polygon_30 set schema osm;
alter table osm_polygon_31 set schema osm;
alter table osm_polygon_32 set schema osm;
alter table osm_polygon_33 set schema osm;
alter table osm_polygon_34 set schema osm;
alter table osm_polygon_35 set schema osm;
alter table osm_polygon_36 set schema osm;
alter table osm_polygon_37 set schema osm;
alter table osm_polygon_38 set schema osm;
alter table osm_polygon_39 set schema osm;
alter table osm_polygon_4 set schema osm;
alter table osm_polygon_40 set schema osm;
alter table osm_polygon_41 set schema osm;
alter table osm_polygon_42 set schema osm;
alter table osm_polygon_43 set schema osm;
alter table osm_polygon_44 set schema osm;
alter table osm_polygon_45 set schema osm;
alter table osm_polygon_46 set schema osm;
alter table osm_polygon_47 set schema osm;
alter table osm_polygon_48 set schema osm;
alter table osm_polygon_5 set schema osm;
alter table osm_polygon_6 set schema osm;
alter table osm_polygon_7 set schema osm;
alter table osm_polygon_8 set schema osm;
alter table osm_polygon_9 set schema osm;
alter table osm_polygon_extract set schema osm;
alter table osm_polygon_extract_1 set schema osm;
alter table osm_polygon_extract_10 set schema osm;
alter table osm_polygon_extract_11 set schema osm;
alter table osm_polygon_extract_12 set schema osm;
alter table osm_polygon_extract_13 set schema osm;
alter table osm_polygon_extract_14 set schema osm;
alter table osm_polygon_extract_15 set schema osm;
alter table osm_polygon_extract_16 set schema osm;
alter table osm_polygon_extract_2 set schema osm;
alter table osm_polygon_extract_3 set schema osm;
alter table osm_polygon_extract_4 set schema osm;
alter table osm_polygon_extract_5 set schema osm;
alter table osm_polygon_extract_6 set schema osm;
alter table osm_polygon_extract_7 set schema osm;
alter table osm_polygon_extract_8 set schema osm;
alter table osm_polygon_extract_9 set schema osm;
alter table osm_polygon_extract_partition_geometry set schema osm;
alter table osm_polygon_extract_partition_geometry_table_id_seq set schema osm;
alter table osm_polygon_partition_geometry set schema osm;
alter table osm_polygon_partition_geometry_table_id_seq set schema osm;
alter table osm_rel set schema osm;
alter table osm_rel_1 set schema osm;
alter table osm_rel_10 set schema osm;
alter table osm_rel_11 set schema osm;
alter table osm_rel_12 set schema osm;
alter table osm_rel_13 set schema osm;
alter table osm_rel_14 set schema osm;
alter table osm_rel_15 set schema osm;
alter table osm_rel_16 set schema osm;
alter table osm_rel_17 set schema osm;
alter table osm_rel_18 set schema osm;
alter table osm_rel_19 set schema osm;
alter table osm_rel_2 set schema osm;
alter table osm_rel_20 set schema osm;
alter table osm_rel_21 set schema osm;
alter table osm_rel_22 set schema osm;
alter table osm_rel_23 set schema osm;
alter table osm_rel_24 set schema osm;
alter table osm_rel_25 set schema osm;
alter table osm_rel_26 set schema osm;
alter table osm_rel_27 set schema osm;
alter table osm_rel_28 set schema osm;
alter table osm_rel_29 set schema osm;
alter table osm_rel_3 set schema osm;
alter table osm_rel_30 set schema osm;
alter table osm_rel_31 set schema osm;
alter table osm_rel_32 set schema osm;
alter table osm_rel_33 set schema osm;
alter table osm_rel_34 set schema osm;
alter table osm_rel_35 set schema osm;
alter table osm_rel_36 set schema osm;
alter table osm_rel_37 set schema osm;
alter table osm_rel_38 set schema osm;
alter table osm_rel_39 set schema osm;
alter table osm_rel_4 set schema osm;
alter table osm_rel_40 set schema osm;
alter table osm_rel_41 set schema osm;
alter table osm_rel_42 set schema osm;
alter table osm_rel_43 set schema osm;
alter table osm_rel_44 set schema osm;
alter table osm_rel_45 set schema osm;
alter table osm_rel_46 set schema osm;
alter table osm_rel_47 set schema osm;
alter table osm_rel_48 set schema osm;
alter table osm_rel_5 set schema osm;
alter table osm_rel_6 set schema osm;
alter table osm_rel_7 set schema osm;
alter table osm_rel_8 set schema osm;
alter table osm_rel_9 set schema osm;
alter table osm_rel_partition_geometry set schema osm;
alter table osm_rel_partition_geometry_table_id_seq set schema osm;
alter table partition_tables set schema osm;
alter table relation_members set schema osm;
alter table relation_tags set schema osm;
alter table relations set schema osm;
alter table save_actions set schema osm;
alter table schema_info set schema osmdb;
alter table tags_parse_cache_table set schema osmdb;
alter table users set schema osm;
alter table way_nodes set schema osm;
alter table way_tags set schema osm;
alter table ways set schema osm;

# move views to the correct schema
alter view osm_all set schema osm;
alter view osm_all_extract set schema osm;
alter view osm_all_line set schema osm;
alter view osm_all_line_extract set schema osm;
alter view osm_all_point set schema osm;
alter view osm_all_point_extract set schema osm;
alter view osm_all_polygon set schema osm;
alter view osm_all_polygon_extract set schema osm;
alter view osm_all_rel set schema osm;
alter view osm_allrel set schema osm;
alter view osm_linepoly set schema osm;
alter view osm_poipoly set schema osm;
alter view osm_rel_members set schema osm;

# move functions to the correct schema
alter function assemble_boundary(bigint) set schema osmdb;
alter function boundary_update_delete() set schema osmdb;
alter function boundary_update_insert() set schema osmdb;
alter function cache_search(text, text) set schema osmdb;
alter function cache_insert(text, text, text, text[], interval) set schema osmdb;
alter function cache_insert(text, text, text) set schema osmdb;
alter function cache_insert(text, text, text, text[]) set schema osmdb;
alter function cache_insert(text, text, text, interval) set schema osmdb;
alter function cache_insert(text, text, text, text) set schema osmdb;
alter function cache_set_depend(text, text, text, interval) set schema osmdb;
alter function cache_set_depend(text, text, interval) set schema osmdb;
alter function cache_remove(text) set schema osmdb;
alter function cache_clean() set schema osmdb;
alter function extract_classify_point(text, hstore, geometry) set schema osmdb;
alter function extract_classify_line(text, hstore, geometry) set schema osmdb;
alter function extract_init() set schema osmdb;
alter function extract_update_delete() set schema osmdb;
alter function extract_update_insert() set schema osmdb;
alter function build_multipolygon(geometry[], geometry[]) set schema osmdb;
alter function make_multipolygon(geometry[]) set schema osmdb;
alter function way_get_geom(bigint) set schema osmdb;
alter function rel_get_geom(bigint, int) set schema osmdb;
alter function node_assemble_tags(bigint) set schema osmdb;
alter function way_assemble_tags(bigint) set schema osmdb;
alter function rel_assemble_tags(bigint) set schema osmdb;
alter function assemble_point(bigint) set schema osmdb;
alter function assemble_way(bigint) set schema osmdb;
alter function assemble_rel(bigint) set schema osmdb;
alter function assemble_multipolygon(bigint) set schema osmdb;
alter function osmosisUpdate() set schema osmdb;
alter function create_query_fun() set schema osmdb;
alter function parse_number(text) set schema osmdb;
alter function parse_number_or_0(text) set schema osmdb;
alter function parse_numbers(text) set schema osmdb;
alter function parse_highest_number(text) set schema osmdb;
alter function parse_lowest_number(text) set schema osmdb;
alter function is_between(text, float, bool, float, bool) set schema osmdb;
alter function oneof_between(text[], float, bool, float, bool) set schema osmdb;
alter function oneof_in(text[], text[]) set schema osmdb;
alter function array_count(anyarray) set schema osmdb;
alter function array_pos(text[], text) set schema osmdb;
alter function array_sort (ANYARRAY) set schema osmdb;
alter function array_to_hstore(text[]) set schema osmdb;
alter function array_to_hstore(text[], text[]) set schema osmdb;
alter function array_toint(anyarray) set schema osmdb;
alter function array_unique(text[]) set schema osmdb;
alter function array_unique(int[]) set schema osmdb;
alter function oneof_is(text[], text) set schema osmdb;
alter function split_semicolon(text) set schema osmdb;
alter function cache_search(text, text) set schema osmdb;
alter function cache_insert(text, text, text, text[], interval) set schema osmdb;
alter function cache_insert(text, text, text) set schema osmdb;
alter function cache_insert(text, text, text, text[]) set schema osmdb;
alter function cache_insert(text, text, text, interval) set schema osmdb;
alter function cache_insert(text, text, text, text) set schema osmdb;
alter function cache_remove(text) set schema osmdb;
alter function cache_clean() set schema osmdb;
alter function example(text) set schema osmdb;
alter function register_hook(text, text, int) set schema osmdb;
alter function call_hooks(text, text, text, text, text) set schema osmdb;
alter function save_actions_save() set schema osmdb;
alter function _tags_data(text) set schema osmdb;
alter function tags_data(text) set schema osmdb;
alter function tags_get(text, text) set schema osmdb;
alter function _tags_get(text, text) set schema osmdb;
alter function tags_get(text, text) set schema osmdb;
alter function tags_get(hstore, text) set schema osmdb;
alter function tags_get(text[], text) set schema osmdb;
alter function tags_parse(text, hstore, geometry, text) set schema osmdb;
alter function tags_parse(text, text) set schema osmdb;
alter function tags_parse_cache(text, bigint, text) set schema osmdb;
alter function tags_merge(hstore[]) set schema osmdb;
alter function tags_merge(hstore, hstore) set schema osmdb;
alter function to_array(geometry) set schema osmdb;
alter function to_array(hstore) set schema osmdb;
alter function to_intarray(bigint) set schema osmdb;
alter function to_intarray(integer) set schema osmdb;
alter function to_intarray(integer[]) set schema osmdb;
alter function to_textarray(text) set schema osmdb;
